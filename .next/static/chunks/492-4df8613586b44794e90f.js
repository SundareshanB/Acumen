(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{60492:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(85893),i=n(67294),c=n(41120),a=n(75177),o=n(5993),l=(0,c.Z)({root:{height:264,flexGrow:1,maxWidth:400},padding:{margin:"0px 10px"}});function d(){var e=l(),t=(0,i.useState)(""),n=t[0],c=t[1];return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)(a.default,{setData:c})}),(0,r.jsx)("div",{className:e.padding,children:(0,r.jsx)(o.default,{value:n})})]})}},5993:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(85893),i=n(34699),c=n(67294),a=n(41120),o=n(82302),l=n(99613),d=n(88222),u=n(56847),s=n(83750),f=n(57394),h=n(79895),p=n(49226),v=n(9669),m=n.n(v);function b(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function x(e,t){return"desc"===e?function(e,n){return b(e,n,t)}:function(e,n){return-b(e,n,t)}}function g(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}var w=[{id:"resource",numeric:!1,disablePadding:!0,label:"Resource"},{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"driver",numeric:!0,disablePadding:!1,label:"Driver"},{id:"profile",numeric:!0,disablePadding:!1,label:"Profile"}];function j(e){var t=e.order,n=e.orderBy;e.onRequestSort;return(0,r.jsx)(s.Z,{children:(0,r.jsx)(f.Z,{children:w.map((function(e){return(0,r.jsx)(d.Z,{align:"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&t,children:e.label},e.id)}))})})}var k=(0,a.Z)((function(e){return{root:{width:"100%"},paper:{width:"100%"},container:{maxHeight:"37vh",minHeight:"37vh",border:"1px solid #810000",padding:"0px 10px",borderRadius:6},table:{minWidth:500},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},rowheadercheck:{"&.MuiCheckbox-colorSecondary.Mui-checked":{color:"#810000"}},rowdata:{"&.MuiTableRow-root.Mui-selected":{backgroundColor:"#eeebdd"}}}}));function Z(e){var t=k(),n=c.useState("asc"),a=(0,i.Z)(n,2),s=a[0],v=a[1],b=c.useState("calories"),w=(0,i.Z)(b,2),Z=w[0],V=w[1],N=c.useState([]),y=(0,i.Z)(N,2),O=y[0],S=y[1],C=c.useState(0),E=(0,i.Z)(C,2),I=E[0],D=(E[1],c.useState(!1)),R=(0,i.Z)(D,2),P=(R[0],R[1],c.useState([])),_=(0,i.Z)(P,2),M=_[0],T=_[1],B=c.useState(5),A=(0,i.Z)(B,2),H=A[0],q=(A[1],(0,p.v9)((function(e){return e.driver.source}))),L=(0,p.v9)((function(e){return e.account})),W=c.useState([]),z=(0,i.Z)(W,2),G=z[0],K=z[1];(0,c.useEffect)((function(){if(void 0!==L.accountdetails){var e=L.accountdetails[0];m().get("http://[::1]:3000/account-drivers/similaraccounts",{params:{period:e.period,driver:e.driver,profile:e.profile}}).then((function(e){return K(e.data)}))}}),[L,q,e.value]),(0,c.useEffect)((function(){var e=[];G.map((function(t){var n={resource:t.refNum,name:t.AH.name,driver:t.driver,profile:t.profile};e.push(n)})),T(e)}),[G]);var F=H-Math.min(H,M.length-I*H);return(0,r.jsx)("div",{className:t.root,children:(0,r.jsx)(h.Z,{className:t.paper,children:(0,r.jsx)(u.Z,{className:t.container,children:(0,r.jsxs)(o.Z,{stickyHeader:!0,className:t.table,"aria-labelledby":"tableTitle",size:"small","aria-label":"enhanced table",children:[(0,r.jsx)(j,{classes:t,numSelected:O.length,order:s,orderBy:Z,onSelectAllClick:function(e){if(e.target.checked){var t=M.map((function(e){return e.name}));S(t)}else S([])},onRequestSort:function(e,t){v(Z===t&&"asc"===s?"desc":"asc"),V(t)},rowCount:M.length}),(0,r.jsxs)(l.Z,{children:[g(M,x(s,Z)).map((function(e,n){var i,c=(i=e.name,-1!==O.indexOf(i));"enhanced-table-checkbox-".concat(n);return(0,r.jsxs)(f.Z,{hover:!0,onClick:function(t){return function(e,t){var n=O.indexOf(t),r=[];-1===n?r=r.concat(O,t):0===n?r=r.concat(O.slice(1)):n===O.length-1?r=r.concat(O.slice(0,-1)):n>0&&(r=r.concat(O.slice(0,n),O.slice(n+1))),S(r)}(0,e.name)},role:"checkbox","aria-checked":c,tabIndex:-1,selected:c,className:t.rowdata,children:[(0,r.jsx)(d.Z,{align:"left",padding:"none",children:e.resource}),(0,r.jsx)(d.Z,{align:"left",children:e.name}),(0,r.jsx)(d.Z,{align:"left",children:e.driver}),(0,r.jsx)(d.Z,{align:"left",children:e.profile})]},e.name)})),F>0&&(0,r.jsx)(f.Z,{style:{height:"auto"},children:(0,r.jsx)(d.Z,{colSpan:6})})]})]})})})})}},75177:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(85893),i=n(87329),c=n(96156),a=n(2949),o=n(67294),l=n(41120),d=n(95425),u=n(80131),s=n(22318),f=n(89039),h=n(52504),p=n(90064),v=n(97305),m=n(13258),b=n(96908),x=n(49226),g=n(64436),w=n(43700),j=n(26209),k=n(9669),Z=n.n(k),V=n(282);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){var t=(0,p.AC)(),n=e.labelText,i=(e.labelIcon,e.labelInfo,e.color),o=e.bgColor,l=(0,a.Z)(e,["labelText","labelIcon","labelInfo","color","bgColor"]);return(0,r.jsx)(u.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({label:(0,r.jsx)("div",{className:t.labelRoot,children:(0,r.jsx)(s.Z,{variant:"body2",className:t.labelText,children:n})}),style:{"--tree-view-color":i,"--tree-view-bg-color":o,"--tree-view-height":38},classes:{root:t.root,content:t.content,expanded:t.expanded,selected:t.selected,group:t.group,label:t.label}},l))}var O=(0,l.Z)({root:{height:157,flexGrow:1,overflow:"auto",border:"1px solid",margin:10,borderRadius:6},formControl:{marginRight:5,minWidth:120},labelname:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"75%",transform:"translate(14px,3px) scale(1)","&.MuiInputLabel-outlined.MuiInputLabel-shrink":{display:"none"}},treeviewtop:{display:"flex",justifyContent:"space-between",alignItems:"center"},checkbox:{"&.MuiCheckbox-colorSecondary.Mui-checked":{color:"#810000"}}});function S(e){var t=e.setData,n=O(),a=(0,o.useState)([]),l=a[0],u=a[1],s=(0,o.useState)((0,i.Z)(v)),k=s[0],N=s[1],S=[],C=(0,o.useState)([]),E=C[0],I=C[1],D=(0,o.useState)(0),R=D[0],P=D[1],_=(0,x.I0)(),M=(0,x.v9)((function(e){return e.header.stage})),T=(0,x.v9)((function(e){return e.header.period})),B=(0,x.v9)((function(e){return e.account.accountdetails}));(0,o.useEffect)((function(){fetch("http://[::1]:3000/center-hierarchies/treeview").then((function(e){return e.json()})).then((function(e){return N(e)})),t("")}),[]),(0,o.useEffect)((function(){k.map((function(e){e.stage===M&&S.push(e)})),S.map((function(e){R<e.Node&&(R=e.Node)})),P(R);for(var e=function(e){S.map((function(t,n){t.Node===e&&(Object.assign(t,(0,c.Z)({},"checked",!1)),0!==t.treeView.length&&t.treeView.map((function(e){Object.assign(e,(0,c.Z)({},"checked",!1))})))}))},t=R;t>0;t--)e(t);for(var n=[],r=function(e){S.map((function(t,r){t.Node===e&&S.map((function(e){if(e.refNum===t.parentRefNum){var c=e.treeView.some((function(e){return e._id===t._id}));e.treeView=c?(0,i.Z)(e.treeView):[].concat((0,i.Z)(e.treeView),[t]),n.push(r)}}))}))},a=R;a>0;a--)r(a);for(var o=[],l=0;l<S.length;l++)n.includes(l)||o.push(S[l]);u([].concat(o))}),[v,k]);var A=function e(t){var i=t.parent;return t.data.map((function(c){return void 0!==c.treeView&&0!==c.treeView.length?(0,r.jsx)(y,{nodeId:c._id,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(m.Z,{className:n.checkbox,checked:c.checked,onClick:function(e){return W(e,c)}})," ",c.name]}),color:"#810000",bgColor:"#EEEBDD",children:(0,r.jsx)(e,{data:c.treeView,parent:i})}):(0,r.jsx)(y,{nodeId:c._id.$oid,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(m.Z,{className:n.checkbox,checked:c.checked,onClick:function(e){return z(t.data,c,i)}})," ",c.name]}),color:"#810000",bgColor:"#EEEBDD"})}))},H=function e(t){t.checked=!0,void 0===t.treeView&&E.push(t),I((0,i.Z)(E));var n=t;if(n.treeView&&0!==n.treeView.length||void 0!==n.treeView)for(var r=0;r<n.treeView.length;r++)n.treeView[r].checked=!0,e(n.treeView[r])},q=function e(t){if(t.checked=!1,void 0===t.treeView){var n=E.findIndex((function(e){return e.name===t.name}));E.splice(n,1)}I((0,i.Z)(E));var r=t;if(r.treeView&&0!==r.treeView.length||void 0!==r.treeView)for(var c=0;c<r.treeView.length;c++)r.treeView[c].checked=!1,e(r.treeView[c])},L=function(e,t){for(var n=e,r=t,i=R;i>0;i--)k.map((function(e){n===e.refNum&&(void 0!==e.treeView&&0!==e.treeView.length?e.treeView.every((function(e){return!0===e.checked}))?(e.checked=!0,n=e.parentRefNum):(e.checked=!1,n=e.parentRefNum):(e.checked=r,n=e.parentRefNum))}))},W=function(e,t){if(!1===t.checked){if(t.checked=!0,0!==t.treeView.length)for(var n=0;n<t.treeView.length;n++)H(t.treeView[n]);L(t.parentRefNum,!0)}else if(!0===t.checked){if(t.checked=!1,0!==t.treeView.length)for(var r=0;r<t.treeView.length;r++)q(t.treeView[r]);L(t.parentRefNum,!1)}u((0,i.Z)(l))},z=function(e,t,n){var r=0;if(!1===t.checked)E.push(t),I((0,i.Z)(E)),t.checked=!0;else{t.checked=!1;var c=E.findIndex((function(e){return e.name===t.name}));E.splice(c,1),I((0,i.Z)(E))}if(0!==e.length&&e.map((function(e){!0===e.checked&&(r+=1)})),r===e.length&&void 0!==n){var a=t.parentRefNum;L(a,!0)}else if(void 0!==n){var o=t.parentRefNum;L(o,!1)}u((0,i.Z)(l))},G=function e(t){t.map((function(t){t.checked=!1,void 0!==t.treeView&&(t.checked=!1,e(t.treeView))}))};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:n.treeviewtop,children:[(0,r.jsxs)(g.Z,{variant:"outlined",disabled:!0,className:n.formControl,children:[(0,r.jsx)(w.Z,{className:n.labelname,id:"demo-simple-select-outlined-label",children:"Financial"}),(0,r.jsx)(j.Z,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",label:"Age",input:(0,r.jsx)(p.xi,{})})]}),(0,r.jsx)(V.Z,{variant:"contained",color:"primary",onClick:function(){E.map((function(e){Z().get("http://[::1]:3000/account-drivers/accountDetails",{params:{period:T,refNum:e.refNum}}).then((function(n){console.log(n.data);var r={refNum:e.refNum,period:T,driver:B[0].driverLink[0].driverName,profile:B[0].profile};Z()({method:"patch",url:"http://[::1]:3000/account-drivers/assignDriverProfile",params:r}).then((function(e){"OK"===e.statusText&&t("OK")}))})).catch((function(e){return console.log(e)})),l.map((function(e){e.checked=!1,void 0!==e.treeView&&G(e.treeView)})),u((0,i.Z)(l)),_((0,b.q)(E))}))},size:"small",children:"Assign Selected"})]}),(0,r.jsx)(d.Z,{className:n.root,defaultExpanded:["3"],defaultCollapseIcon:(0,r.jsx)(f.Z,{}),defaultExpandIcon:(0,r.jsx)(h.Z,{}),defaultEndIcon:(0,r.jsx)("div",{style:{width:24}}),children:l.map((function(e){return(0,r.jsx)(y,{nodeId:e._id,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(m.Z,{className:n.checkbox,checked:e.checked,onClick:function(t){return 0!==e.treeView.length?W(t,e):z([],e)}})," ",e.name]}),color:"#810000",bgColor:"#EEEBDD",children:0!==e.treeView.length&&(0,r.jsx)(A,{data:e.treeView,parent:e})})}))})]})}},96908:function(e,t,n){"use strict";n.d(t,{_:function(){return i},q:function(){return c}});var r=n(17695),i=function(e){return{type:r.B,payload:e}},c=function(e){return{type:r.O,payload:e}}}}]);