(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5171],{41120:function(e,t,o){"use strict";var r=o(22122),n=o(30115),i=o(99700);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.Z)(e,(0,r.Z)({defaultTheme:i.Z},t))}},90064:function(e,t,o){"use strict";o.d(t,{xi:function(){return c},AO:function(){return l},$B:function(){return d},TS:function(){return s},AC:function(){return u}});var r=o(14670),n=o(41120),i=o(14741),a=o(8286),c=((0,r.Z)({root:{"& label":{color:"#8D1B19"},"& label.Mui-focused":{color:"#8D1B19"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#8D1B19",borderWidth:"1px"},"&:hover fieldset":{borderColor:"#8D1B19",borderWidth:"1px"},"&:hover fieldset .Mui-focused":{borderColor:"#8D1B19",borderWidth:"1px"},"&.Mui-focused fieldset":{borderColor:"#8D1B19",borderWidth:"1px"}}}})(a.Z),(0,r.Z)((function(e){return{root:{"label + &":{marginTop:"-4px"}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,width:"120px",padding:"4px 26px 4px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)",backgroundColor:"#eeebdd"}}}}))(i.Z)),l=(0,r.Z)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,width:"90px",padding:"4px 26px 4px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)",backgroundColor:"white"}}}}))(i.Z),d=(0,r.Z)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,width:100,padding:4,transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))(i.Z),s=(0,r.Z)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,width:"100%",padding:4,transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))(i.Z),u=(0,n.Z)((function(e){return{root:{color:e.palette.text.secondary,"&:hover > $content":{backgroundColor:e.palette.action.hover},"&:focus > $content, &$selected > $content":{backgroundColor:"var(--tree-view-bg-color, ".concat(e.palette.grey[400],")"),color:"var(--tree-view-color)"},"&:focus > $content $label, &:hover > $content $label, &$selected > $content $label":{backgroundColor:"transparent"}},content:{color:e.palette.text.secondary,borderTopRightRadius:e.spacing(2),borderBottomRightRadius:e.spacing(2),paddingRight:e.spacing(1),fontWeight:e.typography.fontWeightMedium,"$expanded > &":{fontWeight:e.typography.fontWeightRegular}},group:{marginLeft:0,paddingBottom:6,"& $content":{paddingLeft:0}},expanded:{paddingLeft:10},selected:{},label:{fontWeight:"inherit",color:"black",display:"flex",justifyContent:"left"},labelRoot:{display:"flex",alignItems:"center",padding:e.spacing(.5,0)},labelIcon:{marginRight:e.spacing(1)},labelText:{textAlign:"left",fontWeight:"inherit",flexGrow:1},span:{"&.MuiCheckbox-colorSecondary.Mui-checked":{color:"#810000"}}}}))},56253:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Z}});var r=o(85893),n=o(87329),i=o(96156),a=o(2949),c=o(67294),l=o(41120),d=o(95425),s=o(80131),u=o(22318),f=o(89039),p=o(52504),b=o(90064),h=o(13258),g=o(96908),m=o(49226),v=o(64436),x=o(43700),w=o(26209),k=o(282);function j(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function y(e){var t=(0,b.AC)(),o=e.labelText,n=(e.labelIcon,e.labelInfo,e.color),c=e.bgColor,l=(0,a.Z)(e,["labelText","labelIcon","labelInfo","color","bgColor"]);return(0,r.jsx)(s.Z,function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?j(Object(o),!0).forEach((function(t){(0,i.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):j(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({label:(0,r.jsx)("div",{className:t.labelRoot,children:(0,r.jsx)(u.Z,{variant:"body2",className:t.labelText,children:o})}),style:{"--tree-view-color":n,"--tree-view-bg-color":c},classes:{root:t.root,content:t.content,expanded:t.expanded,selected:t.selected,group:t.group,label:t.label}},l))}var C=(0,l.Z)((function(){return{root:{height:"56vh",flexGrow:1,overflow:"auto"},formControl:{marginRight:5,minWidth:120},labelname:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"75%",transform:"translate(14px,3px) scale(1)","&.MuiInputLabel-outlined.MuiInputLabel-shrink":{display:"none"}},treeviewtop:{display:"flex",justifyContent:"space-between",alignItems:"center"},checkbox:{"&.MuiCheckbox-colorSecondary.Mui-checked":{color:"#810000"}}}}));function Z(){var e=C(),t=(0,c.useState)([]),o=t[0],a=t[1],l=(0,c.useState)([]),s=l[0],u=l[1],j=[],Z=(0,c.useState)([]),S=Z[0],V=Z[1],N=(0,c.useState)(0),I=N[0],R=N[1],O=(0,m.v9)((function(e){return e.header.stage})),E=(0,m.I0)(),_=(0,c.useState)([]),B=_[0],D=_[1],T=(0,m.v9)((function(e){return e.modal.driver}));console.log("treeviewdest",O,T),(0,c.useEffect)((function(){E((0,g._)([])),fetch("http://[::1]:3000/center-hierarchies/treeview").then((function(e){return e.json()})).then((function(e){return u(e)})),fetch("http://[::1]:3000/stages").then((function(e){return e.json()})).then((function(e){D(e)}))}),[O,T]),(0,c.useEffect)((function(){var e=0,t="";B.map((function(e){e.stageName===O&&(t=e.stageOrder)})),B.map((function(t){e<t.stageOrder&&(e=t.stageOrder)}));var o="";B.map((function(r){r.stageOrder<=e&&r.stageOrder===t+1&&(o=r.stageName)})),s.map((function(e){e.stage===o&&j.push(e)})),j.map((function(e){I<e.Node&&(I=e.Node)})),R(I);for(var r=function(e){j.map((function(t,o){t.Node===e&&(Object.assign(t,(0,i.Z)({},"checked",!1)),0!==t.treeView.length&&t.treeView.map((function(e){Object.assign(e,(0,i.Z)({},"checked",!1))})))}))},c=I;c>0;c--)r(c);for(var l=[],d=function(e){j.map((function(t,o){t.Node===e&&j.map((function(e){if(e.refNum===t.parentRefNum){var r=e.treeView.some((function(e){return e._id===t._id}));e.treeView=r?(0,n.Z)(e.treeView):[].concat((0,n.Z)(e.treeView),[t]),l.push(o)}}))}))},u=I;u>0;u--)d(u);for(var f=[],p=0;p<j.length;p++)l.includes(p)||f.push(j[p]);a([].concat(f))}),[s]);var A=function t(o){var n=o.parent;return o.data.map((function(i){return void 0!==i.treeView&&0!==i.treeView.length?(0,r.jsx)(y,{nodeId:i._id,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(h.Z,{className:e.checkbox,checked:i.checked,onClick:function(e){return W(e,i)}})," ",i.name]}),color:"#810000",bgColor:"#EEEBDD",children:(0,r.jsx)(t,{data:i.treeView,parent:n})}):(0,r.jsx)(y,{nodeId:i._id,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(h.Z,{className:e.checkbox,checked:i.checked,onClick:function(e){return P(o.data,i,n)}})," ",i.name]}),color:"#810000",bgColor:"#EEEBDD"})}))},M=function e(t){t.checked=!0,void 0===t.treeView&&S.push(t),V((0,n.Z)(S));var o=t;if(o.treeView&&0!==o.treeView.length||void 0!==o.treeView)for(var r=0;r<o.treeView.length;r++)o.treeView[r].checked=!0,e(o.treeView[r])},$=function e(t){if(t.checked=!1,void 0===t.treeView){var o=S.findIndex((function(e){return e.name===t.name}));S.splice(o,1)}V((0,n.Z)(S));var r=t;if(r.treeView&&0!==r.treeView.length||void 0!==r.treeView)for(var i=0;i<r.treeView.length;i++)r.treeView[i].checked=!1,e(r.treeView[i])},U=function(e,t){for(var o=e,r=t,n=I;n>0;n--)s.map((function(e){o===e.refNum&&(void 0!==e.treeView&&0!==e.treeView.length?e.treeView.every((function(e){return!0===e.checked}))?(e.checked=!0,o=e.parentRefNum):(e.checked=!1,o=e.parentRefNum):(e.checked=r,o=e.parentRefNum))}))},W=function(e,t){if(!1===t.checked){if(t.checked=!0,0!==t.treeView.length)for(var r=0;r<t.treeView.length;r++)M(t.treeView[r]);U(t.parentRefNum,!0)}else if(!0===t.checked){if(t.checked=!1,0!==t.treeView.length)for(var i=0;i<t.treeView.length;i++)$(t.treeView[i]);U(t.parentRefNum,!1)}a((0,n.Z)(o))},P=function(e,t,r){var i=0;if(!1===t.checked)S.push(t),V((0,n.Z)(S)),t.checked=!0;else{t.checked=!1;var c=S.findIndex((function(e){return e.name===t.name}));S.splice(c,1),V((0,n.Z)(S))}if(0!==e.length&&e.map((function(e){!0===e.checked&&(i+=1)})),i===e.length&&void 0!==r){var l=t.parentRefNum;U(l,!0)}else if(void 0!==r){var d=t.parentRefNum;U(d,!1)}a((0,n.Z)(o))},F=function e(t){t.map((function(t){t.checked=!1,void 0!==t.treeView&&(t.checked=!1,e(t.treeView))}))};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:e.treeviewtop,children:[(0,r.jsxs)(v.Z,{variant:"outlined",disabled:!0,className:e.formControl,children:[(0,r.jsx)(x.Z,{className:e.labelname,id:"demo-simple-select-outlined-label",children:"Resource"}),(0,r.jsx)(w.Z,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",label:"Age",input:(0,r.jsx)(b.xi,{})})]}),(0,r.jsx)(k.Z,{variant:"contained",color:"primary",onClick:function(){E((0,g._)(S)),o.map((function(e){e.checked=!1,void 0!==e.treeView&&F(e.treeView)})),a((0,n.Z)(o))},size:"small",children:"Add Assignment"})]}),(0,r.jsx)(d.Z,{className:e.root,defaultExpanded:["3"],defaultCollapseIcon:(0,r.jsx)(f.Z,{}),defaultExpandIcon:(0,r.jsx)(p.Z,{}),defaultEndIcon:(0,r.jsx)("div",{style:{width:24}}),children:o.map((function(t){return(0,r.jsx)(y,{nodeId:t._id,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(h.Z,{className:e.checkbox,checked:t.checked,onClick:function(e){return 0!==t.treeView.length?W(e,t):P([],t)}})," ",t.name]}),color:"#810000",bgColor:"#EEEBDD",children:0!==t.treeView.length&&(0,r.jsx)(A,{data:t.treeView,parent:t})})}))})]})}},96908:function(e,t,o){"use strict";o.d(t,{_:function(){return n},q:function(){return i}});var r=o(17695),n=function(e){return{type:r.B,payload:e}},i=function(e){return{type:r.O,payload:e}}},66307:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Driverbuild/onetreeview",function(){return o(56253)}])}},function(e){e.O(0,[7853,2342,4593,4422,4720,3121,3258,6371,9774,2888,179],(function(){return t=66307,e(e.s=t);var t}));var t=e.O();_N_E=t}]);