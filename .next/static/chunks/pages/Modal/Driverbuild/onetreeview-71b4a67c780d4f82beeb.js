(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{41120:function(e,t,n){"use strict";var r=n(22122),i=n(30115),c=n(99700);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.Z)(e,(0,r.Z)({defaultTheme:c.Z},t))}},57895:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(85893),i=n(87329),c=n(96156),o=n(2949),a=n(67294),l=n(41120),u=n(95425),d=n(80131),s=n(22318),f=n(89039),h=n(52504),p=n(90064),v=n(97305),m=n(13258),w=n(96908),b=n(49226),g=n(64436),x=n(43700),k=n(26209),j=n(282);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){var t=(0,p.AC)(),n=e.labelText,i=(e.labelIcon,e.labelInfo,e.color),a=e.bgColor,l=(0,o.Z)(e,["labelText","labelIcon","labelInfo","color","bgColor"]);return(0,r.jsx)(d.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({label:(0,r.jsx)("div",{className:t.labelRoot,children:(0,r.jsx)(s.Z,{variant:"body2",className:t.labelText,children:n})}),style:{"--tree-view-color":i,"--tree-view-bg-color":a},classes:{root:t.root,content:t.content,expanded:t.expanded,selected:t.selected,group:t.group,label:t.label}},l))}var N=(0,l.Z)((function(){return{root:{height:"67vh",flexGrow:1,overflow:"auto"},formControl:{marginRight:5,minWidth:120},labelname:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"75%",transform:"translate(14px,3px) scale(1)","&.MuiInputLabel-outlined.MuiInputLabel-shrink":{display:"none"}},treeviewtop:{display:"flex",justifyContent:"space-between",alignItems:"center"},checkbox:{"&.MuiCheckbox-colorSecondary.Mui-checked":{color:"#810000"}}}}));function O(){var e=N(),t=(0,a.useState)([]),n=t[0],o=t[1],l=(0,a.useState)((0,i.Z)(v)),d=l[0],s=l[1],V=[],O=(0,a.useState)([]),y=O[0],E=O[1],_=(0,a.useState)(0),C=_[0],I=_[1],D=(0,b.v9)((function(e){return e.header.stage})),R=(0,b.I0)(),P=(0,a.useState)([]),S=P[0],T=P[1],M=(0,b.v9)((function(e){return e.modal.driver}));(0,a.useEffect)((function(){R((0,w._)([])),fetch("http://[::1]:3000/center-hierarchies/treeview").then((function(e){return e.json()})).then((function(e){return s(e)})),fetch("http://[::1]:3000/stages").then((function(e){return e.json()})).then((function(e){T(e)}))}),[D,M]),(0,a.useEffect)((function(){var e=0,t="";S.map((function(e){e.stageName===D&&(t=e.stageOrder)})),S.map((function(t){e<t.stageOrder&&(e=t.stageOrder)}));var n="";S.map((function(r){r.stageOrder<=e&&r.stageOrder===t+1&&(n=r.stageName)})),d.map((function(e){e.stage===n&&V.push(e)})),V.map((function(e){C<e.Node&&(C=e.Node)})),I(C);for(var r=function(e){V.map((function(t,n){t.Node===e&&(Object.assign(t,(0,c.Z)({},"checked",!1)),0!==t.treeView.length&&t.treeView.map((function(e){Object.assign(e,(0,c.Z)({},"checked",!1))})))}))},a=C;a>0;a--)r(a);for(var l=[],u=function(e){V.map((function(t,n){t.Node===e&&V.map((function(e){if(e.refNum===t.parentRefNum){var r=e.treeView.some((function(e){return e._id===t._id}));e.treeView=r?(0,i.Z)(e.treeView):[].concat((0,i.Z)(e.treeView),[t]),l.push(n)}}))}))},s=C;s>0;s--)u(s);for(var f=[],h=0;h<V.length;h++)l.includes(h)||f.push(V[h]);o([].concat(f))}),[v,d]);var A=function t(n){var i=n.parent;return n.data.map((function(c){return void 0!==c.treeView&&0!==c.treeView.length?(0,r.jsx)(Z,{nodeId:c._id,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(m.Z,{className:e.checkbox,checked:c.checked,onClick:function(e){return q(e,c)}})," ",c.name]}),color:"#810000",bgColor:"#EEEBDD",children:(0,r.jsx)(t,{data:c.treeView,parent:i})}):(0,r.jsx)(Z,{nodeId:c._id,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(m.Z,{className:e.checkbox,checked:c.checked,onClick:function(e){return z(n.data,c,i)}})," ",c.name]}),color:"#810000",bgColor:"#EEEBDD"})}))},B=function e(t){t.checked=!0,void 0===t.treeView&&y.push(t),E((0,i.Z)(y));var n=t;if(n.treeView&&0!==n.treeView.length||void 0!==n.treeView)for(var r=0;r<n.treeView.length;r++)n.treeView[r].checked=!0,e(n.treeView[r])},L=function e(t){if(t.checked=!1,void 0===t.treeView){var n=y.findIndex((function(e){return e.name===t.name}));y.splice(n,1)}E((0,i.Z)(y));var r=t;if(r.treeView&&0!==r.treeView.length||void 0!==r.treeView)for(var c=0;c<r.treeView.length;c++)r.treeView[c].checked=!1,e(r.treeView[c])},X=function(e,t){for(var n=e,r=t,i=C;i>0;i--)d.map((function(e){n===e.refNum&&(void 0!==e.treeView&&0!==e.treeView.length?e.treeView.every((function(e){return!0===e.checked}))?(e.checked=!0,n=e.parentRefNum):(e.checked=!1,n=e.parentRefNum):(e.checked=r,n=e.parentRefNum))}))},q=function(e,t){if(!1===t.checked){if(t.checked=!0,0!==t.treeView.length)for(var r=0;r<t.treeView.length;r++)B(t.treeView[r]);X(t.parentRefNum,!0)}else if(!0===t.checked){if(t.checked=!1,0!==t.treeView.length)for(var c=0;c<t.treeView.length;c++)L(t.treeView[c]);X(t.parentRefNum,!1)}o((0,i.Z)(n))},z=function(e,t,r){var c=0;if(!1===t.checked)y.push(t),E((0,i.Z)(y)),t.checked=!0;else{t.checked=!1;var a=y.findIndex((function(e){return e.name===t.name}));y.splice(a,1),E((0,i.Z)(y))}if(0!==e.length&&e.map((function(e){!0===e.checked&&(c+=1)})),c===e.length&&void 0!==r){var l=t.parentRefNum;X(l,!0)}else if(void 0!==r){var u=t.parentRefNum;X(u,!1)}o((0,i.Z)(n))},G=function e(t){t.map((function(t){t.checked=!1,void 0!==t.treeView&&(t.checked=!1,e(t.treeView))}))};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:e.treeviewtop,children:[(0,r.jsxs)(g.Z,{variant:"outlined",disabled:!0,className:e.formControl,children:[(0,r.jsx)(x.Z,{className:e.labelname,id:"demo-simple-select-outlined-label",children:"Resource"}),(0,r.jsx)(k.Z,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",label:"Age",input:(0,r.jsx)(p.xi,{})})]}),(0,r.jsx)(j.Z,{variant:"contained",color:"primary",onClick:function(){R((0,w._)(y)),n.map((function(e){e.checked=!1,void 0!==e.treeView&&G(e.treeView)})),o((0,i.Z)(n))},size:"small",children:"Add Assignment"})]}),(0,r.jsx)(u.Z,{className:e.root,defaultExpanded:["3"],defaultCollapseIcon:(0,r.jsx)(f.Z,{}),defaultExpandIcon:(0,r.jsx)(h.Z,{}),defaultEndIcon:(0,r.jsx)("div",{style:{width:24}}),children:n.map((function(t){return(0,r.jsx)(Z,{nodeId:t._id,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(m.Z,{className:e.checkbox,checked:t.checked,onClick:function(e){return 0!==t.treeView.length?q(e,t):z([],t)}})," ",t.name]}),color:"#810000",bgColor:"#EEEBDD",children:0!==t.treeView.length&&(0,r.jsx)(A,{data:t.treeView,parent:t})})}))})]})}},96908:function(e,t,n){"use strict";n.d(t,{_:function(){return i},q:function(){return c}});var r=n(17695),i=function(e){return{type:r.B,payload:e}},c=function(e){return{type:r.O,payload:e}}},79883:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Modal/Driverbuild/onetreeview",function(){return n(57895)}])}},function(e){e.O(0,[7853,2342,4593,4422,4720,3121,3258,6371,6144,9774,2888,179],(function(){return t=79883,e(e.s=t);var t}));var t=e.O();_N_E=t}]);