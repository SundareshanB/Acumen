(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[151],{46141:function(e,n,t){"use strict";var r=t(85893),i=t(34699),a=t(67294),c=t(41120),l=t(52663),o=t(66856),s=t(29525),d=t(7212),u=t(66083),h=t(282),f=(0,c.Z)({root:{width:"100%"}});n.Z=function(e){f();var n=a.useState(e.value),t=(0,i.Z)(n,2),c=(t[0],t[1],e.success),m=e.value,p=e.onClose;return(0,r.jsx)("div",{children:(0,r.jsxs)(l.Z,{open:c,onClose:p,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,r.jsx)(u.Z,{children:m.toUpperCase()}),(0,r.jsx)(s.Z,{children:(0,r.jsx)(d.Z,{id:"alert-dialog-description",children:"Selected data's are ".concat(m,"ed successfully")})}),(0,r.jsx)(o.Z,{children:(0,r.jsx)(h.Z,{onClick:p,color:"primary",autoFocus:!0,children:"Ok"})})]})})}},60151:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var r=t(85893),i=t(87329),a=t(34699),c=t(67294),l=t(41120),o=t(82302),s=t(282),d=t(99613),u=t(88222),h=t(56847),f=t(83750),m=t(57394),p=t(79895),v=t(13258),x=t(49226),g=t(52663),b=t(66856),Z=t(29525),j=t(7212),y=t(66083),k=t(9669),C=t.n(k),S=t(90064),N=t(96908),w=t(46141),D=t(95477);function Q(e,n,t){return n[t]<e[t]?-1:n[t]>e[t]?1:0}function q(e,n){return"desc"===e?function(e,t){return Q(e,t,n)}:function(e,t){return-Q(e,t,n)}}function A(e,n){var t=e.map((function(e,n){return[e,n]}));return t.sort((function(e,t){var r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t.map((function(e){return e[0]}))}var P=[{id:"resource",numeric:!1,disablePadding:!0,label:"Resource"},{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"qty",numeric:!0,disablePadding:!1,label:"Qty"},{id:"wt",numeric:!0,disablePadding:!1,label:"Wt"}];function R(e){var n=e.classes,t=e.onSelectAllClick,i=e.order,a=e.orderBy,c=e.numSelected,l=e.rowCount;e.onRequestSort;return(0,r.jsx)(f.Z,{children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(u.Z,{padding:"checkbox",children:(0,r.jsx)(v.Z,{checked:l>0&&c===l,onChange:t,className:n.selectall})}),P.map((function(e){return(0,r.jsx)(u.Z,{align:"left",padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&i,children:e.label},e.id)}))]})})}var z=(0,l.Z)((function(e){return{root:{width:"100%"},paper:{width:"100%"},container:{maxHeight:"45vh"},table:{minWidth:500,height:"auto"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},rowheadercheck:{"&.MuiCheckbox-colorSecondary.Mui-checked":{color:"#810000"}},rowdata:{"&.MuiTableRow-root.Mui-selected":{backgroundColor:"#eeebdd"}},selectall:{"&.MuiCheckbox-colorSecondary.Mui-checked":{color:"#810000"}},buttonalign:{display:"flex",justifyContent:"flex-end",padding:"12px 0px"},button:{marginLeft:10},title:{fontSize:"14px",fontWeight:"bold",color:"black"},circular:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}}));function L(){var e=z(),n=c.useState("asc"),t=(0,a.Z)(n,2),l=t[0],f=t[1],k=c.useState("calories"),Q=(0,a.Z)(k,2),P=Q[0],L=Q[1],M=c.useState([]),T=(0,a.Z)(M,2),_=T[0],E=T[1],W=c.useState(0),F=(0,a.Z)(W,2),O=F[0],H=(F[1],c.useState(5)),I=(0,a.Z)(H,2),V=I[0],B=(I[1],(0,x.v9)((function(e){return e.driver.data}))),K=c.useState(!1),U=(0,a.Z)(K,2),Y=U[0],G=U[1],J=c.useState(!1),X=(0,a.Z)(J,2),$=X[0],ee=X[1],ne=c.useState(""),te=(0,a.Z)(ne,2),re=te[0],ie=te[1],ae=c.useState([]),ce=(0,a.Z)(ae,2),le=ce[0],oe=ce[1],se=c.useState([]),de=(0,a.Z)(se,2),ue=de[0],he=de[1],fe=(0,x.v9)((function(e){return e.account.accountdetails})),me=(0,x.v9)((function(e){return e.header})),pe=(0,x.I0)();(0,c.useEffect)((function(){he([])}),[]),(0,c.useEffect)((function(){"No data"!==fe[0]&&0!==fe.length&&(le=[],he([]),fe[0].driverLink[0]&&"Common"===fe[0].driverLink[0].driverAssociation?C().get("http://[::1]:3000/AssignmentProfile/Dest_Common",{params:{period:me.period,refNum:me.account[0].refNum}}).then((function(e){return oe(e.data)})).catch((function(e){return console.log("err")})):C().get("http://[::1]:3000/driverQuantity/Dest_Specific",{params:{period:me.period,refNum:me.account[0].refNum}}).then((function(e){return oe(e.data)})).catch((function(e){return console.log("err")})))}),[fe,re]),console.log("desttable",B,me,fe,le),(0,c.useEffect)((function(){var e=[];le.map((function(n){var t={resource:n.destRefNum,name:n.AH.name,qty:n.DQ?n.DQ.driverQty:n.driverQty,wt:n.DQ?n.DQ.driverWt:n.driverWt};e.push(t)})),he([].concat(e))}),[le]),(0,c.useEffect)((function(){if(0!==B.length){var e=(0,i.Z)(ue);B.map((function(n){var t={resource:n.refNum,name:n.name,qty:1,wt:1};!e.find((function(e){return e.name===t.name}))&&e.push(t)})),he((0,i.Z)(e))}}),[B]);var ve=V-Math.min(V,ue.length-O*V);return(0,r.jsxs)("div",{className:e.root,children:[(0,r.jsx)("div",{className:e.title,children:"Current Assignment"}),(0,r.jsxs)("div",{className:e.buttonalign,children:[(0,r.jsx)(s.Z,{className:e.button,variant:"contained",color:"primary",size:"small",disabled:0===_.length,onClick:function(){return G(!Y)},children:"Delete"}),(0,r.jsx)(s.Z,{className:e.button,variant:"contained",color:"primary",size:"small",onClick:function(){return function(){var e=ue.length;ue.map((function(n){new Date;var t={destRefNum:n.resource,driver:fe[0].driverLink[0].driverName,period:me.period,driverQty:parseFloat(n.qty),driverWt:parseFloat(n.wt)};C()({method:"patch",url:"http://[::1]:3000/driverQuantity/SubmitDest",params:t}).then((function(t){if("OK"===t.statusText){if(e-=1,fe[0].driverLink[0]&&"Common"===fe[0].driverLink[0].driverAssociation){var r={profileName:fe[0].profile,destRefNum:n.resource,period:me.period};C()({method:"patch",url:"http://[::1]:3000/assignmentProfile/SubmitAssignmentDest",params:r}).then((function(e){return console.log(e)}))}0===e&&(ie("submit"),ee(!0),pe((0,N._)([])))}})).catch((function(e){return console.log(e)}))}))}()},children:"Submit"})]}),(0,r.jsx)(p.Z,{className:e.paper,children:(0,r.jsx)(h.Z,{className:e.container,children:(0,r.jsx)(o.Z,{stickyHeader:!0,className:e.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table",children:0===ue.length?(0,r.jsx)(d.Z,{children:(0,r.jsx)(m.Z,{children:(0,r.jsx)(u.Z,{className:e.circular,children:(0,r.jsx)(D.Z,{})})})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{classes:e,numSelected:_.length,order:l,orderBy:P,onSelectAllClick:function(e){if(e.target.checked){var n=ue.map((function(e){return e.name}));E(n)}else E([])},onRequestSort:function(e,n){f(P===n&&"asc"===l?"desc":"asc"),L(n)},rowCount:ue.length}),(0,r.jsxs)(d.Z,{children:[A(ue,q(l,P)).map((function(n,t){var i,a=(i=n.name,-1!==_.indexOf(i)),c="enhanced-table-checkbox-".concat(t);return(0,r.jsxs)(m.Z,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,className:e.rowdata,children:[(0,r.jsx)(u.Z,{padding:"checkbox",children:(0,r.jsx)(v.Z,{className:e.rowheadercheck,onClick:function(e){return function(e,n){var t=_.indexOf(n.name),r=[];-1===t?r=r.concat(_,n.name):0===t?r=r.concat(_.slice(1)):t===_.length-1?r=r.concat(_.slice(0,-1)):t>0&&(r=r.concat(_.slice(0,t),_.slice(t+1))),E(r)}(0,n)},checked:a,inputProps:{"aria-labelledby":c}})}),(0,r.jsx)(u.Z,{align:"left",padding:"none",children:n.resource}),(0,r.jsx)(u.Z,{align:"left",children:n.name}),(0,r.jsx)(u.Z,{align:"left",children:n.qty?(0,r.jsx)(S.TS,{type:"number",onChange:function(e){return n.qty=e.target.value},defaultValue:n.qty,size:"small",id:"",variant:"outlined"}):(0,r.jsx)(S.TS,{type:"number",onChange:function(e){return n.qty=e.target.value},defaultValue:0,size:"small",id:"",variant:"outlined"})}),(0,r.jsx)(u.Z,{align:"left",children:(0,r.jsx)(S.TS,{type:"number",onChange:function(e){return n.wt=e.target.value},defaultValue:n.wt,size:"small",id:"",variant:"outlined"})})]},n.name)})),ve>0&&(0,r.jsx)(m.Z,{style:{height:"auto"},children:(0,r.jsx)(u.Z,{colSpan:6})})]})]})})})}),(0,r.jsx)("div",{children:(0,r.jsxs)(g.Z,{open:Y,onClose:function(){return G(!Y)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,r.jsx)(y.Z,{children:"Delete"}),(0,r.jsx)(Z.Z,{children:(0,r.jsx)(j.Z,{id:"alert-dialog-description",children:"Are you Sure ?"})}),(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(s.Z,{color:"primary",onClick:function(){return function(){G(!Y),(0,i.Z)(ue);var e=_.length;_.map((function(n){var t={destRefNum:ue.find((function(e){return e.name===n})).resource,driver:fe[0].driverLink[0].driverName,period:me.period};C()({method:"delete",url:"http://[::1]:3000/driverQuantity/deleteDest",params:t}).then((function(n){"OK"===n.statusText&&(e-=1,ie("delete"),0===e&&ee(!0))}))})),E([])}()},children:"Yes"}),(0,r.jsx)(s.Z,{onClick:function(){return G(!Y)},color:"primary",autoFocus:!0,children:"No"})]})]})}),(0,r.jsx)("div",{children:(0,r.jsx)(w.Z,{success:$,value:re,onClose:function(){ee(!$)}})})]})}}}]);