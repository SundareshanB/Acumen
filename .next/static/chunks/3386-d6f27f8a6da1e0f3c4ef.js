(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3386],{23386:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(85893),i=n(67294),c=n(41120),a=n(44164),o=n(31457),l=(0,c.Z)({root:{height:264,flexGrow:1,maxWidth:400},padding:{margin:"0px 10px"}});function d(){var e=l(),t=(0,i.useState)(""),n=t[0],c=t[1];return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)(a.default,{setData:c})}),(0,r.jsx)("div",{className:e.padding,children:(0,r.jsx)(o.default,{value:n})})]})}},31457:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(85893),i=n(34699),c=n(67294),a=n(41120),o=n(82302),l=n(99613),d=n(88222),u=n(56847),s=n(83750),f=n(57394),h=n(79895),p=n(49226),m=n(9669),v=n.n(m);function b(e,t,n,r){return{resource:e,name:t,driver:n,profile:r}}b("RES_HQS_FIN_001_901","General Corporate","FTE","AUDIT"),b("RES_HQS_FIN_006_06","Mgr audit","FTE","AUDIT"),b("RES_HQS_FIN_006_532","Sr.Auditor","FTE","AUDIT"),b("RES_HQS_FIN_006_9067","Auditor","FTE","AUDIT");function x(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function g(e,t){return"desc"===e?function(e,n){return x(e,n,t)}:function(e,n){return-x(e,n,t)}}function w(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}var j=[{id:"resource",numeric:!1,disablePadding:!0,label:"Resource"},{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"driver",numeric:!0,disablePadding:!1,label:"Driver"},{id:"profile",numeric:!0,disablePadding:!1,label:"Profile"}];function k(e){var t=e.order,n=e.orderBy;e.onRequestSort;return(0,r.jsx)(s.Z,{children:(0,r.jsx)(f.Z,{children:j.map((function(e){return(0,r.jsx)(d.Z,{align:"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&t,children:e.label},e.id)}))})})}var Z=(0,a.Z)((function(e){return{root:{width:"100%"},paper:{width:"100%"},container:{maxHeight:"37vh",minHeight:"37vh",border:"1px solid #810000",padding:"0px 10px",borderRadius:6},table:{minWidth:500},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},rowheadercheck:{"&.MuiCheckbox-colorSecondary.Mui-checked":{color:"#810000"}},rowdata:{"&.MuiTableRow-root.Mui-selected":{backgroundColor:"#eeebdd"}}}}));function N(e){var t=Z(),n=c.useState("asc"),a=(0,i.Z)(n,2),s=a[0],m=a[1],b=c.useState("calories"),x=(0,i.Z)(b,2),j=x[0],N=x[1],V=c.useState([]),S=(0,i.Z)(V,2),y=S[0],E=S[1],I=c.useState(0),_=(0,i.Z)(I,2),O=_[0],C=(_[1],c.useState(!1)),D=(0,i.Z)(C,2),R=(D[0],D[1],c.useState([])),T=(0,i.Z)(R,2),P=T[0],A=T[1],M=c.useState(5),F=(0,i.Z)(M,2),H=F[0],B=(F[1],(0,p.v9)((function(e){return e.driver.source}))),q=(0,p.v9)((function(e){return e.account})),Q=c.useState([]),U=(0,i.Z)(Q,2),G=U[0],L=U[1];(0,c.useEffect)((function(){if(void 0!==q.accountdetails){var e=q.accountdetails[0];v().get("http://[::1]:3000/account-drivers/similaraccounts",{params:{period:e.period,driver:e.driver,profile:e.profile}}).then((function(e){return L(e.data)}))}}),[q,B,e.value]),(0,c.useEffect)((function(){var e=[];G.map((function(t){var n={resource:t.refNum,name:t.AH.name,driver:t.driver,profile:t.profile};e.push(n)})),A(e)}),[G]);var W=H-Math.min(H,P.length-O*H);return(0,r.jsx)("div",{className:t.root,children:(0,r.jsx)(h.Z,{className:t.paper,children:(0,r.jsx)(u.Z,{className:t.container,children:(0,r.jsxs)(o.Z,{stickyHeader:!0,className:t.table,"aria-labelledby":"tableTitle",size:"small","aria-label":"enhanced table",children:[(0,r.jsx)(k,{classes:t,numSelected:y.length,order:s,orderBy:j,onSelectAllClick:function(e){if(e.target.checked){var t=P.map((function(e){return e.name}));E(t)}else E([])},onRequestSort:function(e,t){m(j===t&&"asc"===s?"desc":"asc"),N(t)},rowCount:P.length}),(0,r.jsxs)(l.Z,{children:[w(P,g(s,j)).map((function(e,n){var i,c=(i=e.name,-1!==y.indexOf(i));"enhanced-table-checkbox-".concat(n);return(0,r.jsxs)(f.Z,{hover:!0,onClick:function(t){return function(e,t){var n=y.indexOf(t),r=[];-1===n?r=r.concat(y,t):0===n?r=r.concat(y.slice(1)):n===y.length-1?r=r.concat(y.slice(0,-1)):n>0&&(r=r.concat(y.slice(0,n),y.slice(n+1))),E(r)}(0,e.name)},role:"checkbox","aria-checked":c,tabIndex:-1,selected:c,className:t.rowdata,children:[(0,r.jsx)(d.Z,{align:"left",padding:"none",children:e.resource}),(0,r.jsx)(d.Z,{align:"left",children:e.name}),(0,r.jsx)(d.Z,{align:"left",children:e.driver}),(0,r.jsx)(d.Z,{align:"left",children:e.profile})]},e.name)})),W>0&&(0,r.jsx)(f.Z,{style:{height:"auto"},children:(0,r.jsx)(d.Z,{colSpan:6})})]})]})})})})}},44164:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(85893),i=n(87329),c=n(96156),a=n(2949),o=n(67294),l=n(41120),d=n(95425),u=n(80131),s=n(22318),f=n(89039),h=n(52504),p=n(90064),m=n(97305),v=n(13258),b=n(96908),x=n(49226),g=n(64436),w=n(43700),j=n(26209),k=n(9669),Z=n.n(k),N=n(282);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){var t=(0,p.AC)(),n=e.labelText,i=(e.labelIcon,e.labelInfo,e.color),o=e.bgColor,l=(0,a.Z)(e,["labelText","labelIcon","labelInfo","color","bgColor"]);return(0,r.jsx)(u.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({label:(0,r.jsx)("div",{className:t.labelRoot,children:(0,r.jsx)(s.Z,{variant:"body2",className:t.labelText,children:n})}),style:{"--tree-view-color":i,"--tree-view-bg-color":o},classes:{root:t.root,content:t.content,expanded:t.expanded,selected:t.selected,group:t.group,label:t.label}},l))}var y=(0,l.Z)({root:{height:215,flexGrow:1,overflow:"auto",border:"1px solid",margin:10,borderRadius:6},formControl:{marginRight:5,minWidth:120},labelname:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"75%",transform:"translate(14px,3px) scale(1)","&.MuiInputLabel-outlined.MuiInputLabel-shrink":{display:"none"}},treeviewtop:{display:"flex",justifyContent:"space-between",alignItems:"center"},checkbox:{"&.MuiCheckbox-colorSecondary.Mui-checked":{color:"#810000"}}});function E(e){var t=e.setData,n=y(),a=(0,o.useState)([]),l=a[0],u=a[1],s=(0,o.useState)((0,i.Z)(m)),k=s[0],V=s[1],E=[],I=(0,o.useState)([]),_=I[0],O=I[1],C=(0,o.useState)(0),D=C[0],R=C[1],T=(0,x.I0)(),P=(0,o.useState)([]),A=(P[0],P[1],(0,o.useState)([])),M=(A[0],A[1],(0,x.v9)((function(e){return e.header.stage}))),F=(0,x.v9)((function(e){return e.header.period})),H=(0,x.v9)((function(e){return e.account.accountdetails}));(0,o.useEffect)((function(){fetch("http://[::1]:3000/center-hierarchies/treeview").then((function(e){return e.json()})).then((function(e){return V(e)})),t("")}),[]),(0,o.useEffect)((function(){k.map((function(e){e.stage===M&&E.push(e)})),E.map((function(e){D<e.Node&&(D=e.Node)})),R(D);for(var e=function(e){E.map((function(t,n){t.Node===e&&(Object.assign(t,(0,c.Z)({},"checked",!1)),0!==t.treeView.length&&t.treeView.map((function(e){Object.assign(e,(0,c.Z)({},"checked",!1))})))}))},t=D;t>0;t--)e(t);for(var n=[],r=function(e){E.map((function(t,r){t.Node===e&&E.map((function(e){if(e.refNum===t.parentRefNum){var c=e.treeView.some((function(e){return e._id===t._id}));e.treeView=c?(0,i.Z)(e.treeView):[].concat((0,i.Z)(e.treeView),[t]),n.push(r)}}))}))},a=D;a>0;a--)r(a);for(var o=[],l=0;l<E.length;l++)n.includes(l)||o.push(E[l]);u([].concat(o))}),[m,k]);var B=function e(t){var i=t.parent;return t.data.map((function(c){return void 0!==c.treeView&&0!==c.treeView.length?(0,r.jsx)(S,{nodeId:c._id,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(v.Z,{className:n.checkbox,checked:c.checked,onClick:function(e){return G(e,c)}})," ",c.name]}),color:"#810000",bgColor:"#EEEBDD",children:(0,r.jsx)(e,{data:c.treeView,parent:i})}):(0,r.jsx)(S,{nodeId:c._id.$oid,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(v.Z,{className:n.checkbox,checked:c.checked,onClick:function(e){return L(t.data,c,i)}})," ",c.name]}),color:"#810000",bgColor:"#EEEBDD"})}))},q=function e(t){t.checked=!0,void 0===t.treeView&&_.push(t),O((0,i.Z)(_));var n=t;if(n.treeView&&0!==n.treeView.length||void 0!==n.treeView)for(var r=0;r<n.treeView.length;r++)n.treeView[r].checked=!0,e(n.treeView[r])},Q=function e(t){if(t.checked=!1,void 0===t.treeView){var n=_.findIndex((function(e){return e.name===t.name}));_.splice(n,1)}O((0,i.Z)(_));var r=t;if(r.treeView&&0!==r.treeView.length||void 0!==r.treeView)for(var c=0;c<r.treeView.length;c++)r.treeView[c].checked=!1,e(r.treeView[c])},U=function(e,t){for(var n=e,r=t,i=D;i>0;i--)k.map((function(e){n===e.refNum&&(void 0!==e.treeView&&0!==e.treeView.length?e.treeView.every((function(e){return!0===e.checked}))?(e.checked=!0,n=e.parentRefNum):(e.checked=!1,n=e.parentRefNum):(e.checked=r,n=e.parentRefNum))}))},G=function(e,t){if(!1===t.checked){if(t.checked=!0,0!==t.treeView.length)for(var n=0;n<t.treeView.length;n++)q(t.treeView[n]);U(t.parentRefNum,!0)}else if(!0===t.checked){if(t.checked=!1,0!==t.treeView.length)for(var r=0;r<t.treeView.length;r++)Q(t.treeView[r]);U(t.parentRefNum,!1)}u((0,i.Z)(l))},L=function(e,t,n){var r=0;if(!1===t.checked)_.push(t),O((0,i.Z)(_)),t.checked=!0;else{t.checked=!1;var c=_.findIndex((function(e){return e.name===t.name}));_.splice(c,1),O((0,i.Z)(_))}if(0!==e.length&&e.map((function(e){!0===e.checked&&(r+=1)})),r===e.length&&void 0!==n){var a=t.parentRefNum;U(a,!0)}else if(void 0!==n){var o=t.parentRefNum;U(o,!1)}u((0,i.Z)(l))},W=function e(t){t.map((function(t){t.checked=!1,void 0!==t.treeView&&(t.checked=!1,e(t.treeView))}))};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:n.treeviewtop,children:[(0,r.jsxs)(g.Z,{variant:"outlined",disabled:!0,className:n.formControl,children:[(0,r.jsx)(w.Z,{className:n.labelname,id:"demo-simple-select-outlined-label",children:"Financial"}),(0,r.jsx)(j.Z,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",label:"Age",input:(0,r.jsx)(p.xi,{})})]}),(0,r.jsx)(N.Z,{variant:"contained",color:"primary",onClick:function(){_.map((function(e){Z().get("http://[::1]:3000/account-drivers/accountDetails",{params:{period:F,refNum:e.refNum}}).then((function(n){console.log(n.data);var r={refNum:e.refNum,period:F,driver:H[0].driverLink[0].driverName,profile:H[0].profile};Z()({method:"patch",url:"http://[::1]:3000/account-drivers/assignDriverProfile",params:r}).then((function(e){"OK"===e.statusText&&t("OK")}))})).catch((function(e){return console.log(e)})),l.map((function(e){e.checked=!1,void 0!==e.treeView&&W(e.treeView)})),u((0,i.Z)(l)),T((0,b.q)(_))}))},size:"small",children:"Assign Selected"})]}),(0,r.jsx)(d.Z,{className:n.root,defaultExpanded:["3"],defaultCollapseIcon:(0,r.jsx)(f.Z,{}),defaultExpandIcon:(0,r.jsx)(h.Z,{}),defaultEndIcon:(0,r.jsx)("div",{style:{width:24}}),children:l.map((function(e){return(0,r.jsx)(S,{nodeId:e._id,labelText:(0,r.jsxs)("div",{children:[(0,r.jsx)(v.Z,{className:n.checkbox,checked:e.checked,onClick:function(t){return 0!==e.treeView.length?G(t,e):L([],e)}})," ",e.name]}),color:"#810000",bgColor:"#EEEBDD",children:0!==e.treeView.length&&(0,r.jsx)(B,{data:e.treeView,parent:e})})}))})]})}},96908:function(e,t,n){"use strict";n.d(t,{_:function(){return i},q:function(){return c}});var r=n(17695),i=function(e){return{type:r.B,payload:e}},c=function(e){return{type:r.O,payload:e}}}}]);